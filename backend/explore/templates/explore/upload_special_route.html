{% extends "wagtailadmin/base.html" %}
{% load i18n %}

{% block content %}
<header class="merged nice-padding">
    <div class="row">
        <div class="left">
            <div class="col">
                <h1 class="w-text-2xl w-font-bold">{% trans "Special Fares" %}</h1>
            </div>
        </div>
    </div>
</header>

    <div class="nice-padding">
        <!-- Upload Form -->
        <section>
            <h2 class="w-text-lg w-font-semibold">{% trans "Upload Excel File" %}</h2>
            <!-- <p class="w-mt-2">Upload an Excel file with columns: "Special ID", "Route", "Starting Price", "Trip Type"</p>
            <p class="w-mt-1">
                <ul>
                    <li><strong>Special ID</strong>: Special code from the Special model</li>
                    <li><strong>Route</strong>: Route name in format "XXX-YYY" (e.g., "HIR-BNE")</li>
                    <li><strong>Starting Price</strong>: Numeric price value</li>
                    <li><strong>Trip Type</strong>: "one_way" or "return_trip"</li>
                </ul>
            </p> -->
            <form method="POST" enctype="multipart/form-data" class="w-mt-4">
                {% csrf_token %}
                <div class="w-mb-4">
                    <input type="file" name="excel_file" accept=".xlsx,.xls" required class="w-input w-input--file">
                </div>
                <button type="submit" class="button button-primary">{% trans "Upload" %}</button>
            </form>
        </section>

        <!-- Existing Special Fares -->
        {% if special_routes %}
            <section class="w-mt-8">
                <h2 class="w-text-lg w-font-semibold">{% trans "Existing Special Fares" %}</h2>
                <table class="listing w-mt-2">
                    <thead>
                        <tr>
                            <!-- <th>{% trans "Special Name" %}</th> -->
                            <th>{% trans "Special ID" %}</th>
                            <th>{% trans "Route" %}</th>
                            <th>{% trans "Starting Price" %}</th>
                            <th>{% trans "Trip Type" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for special_route in special_routes %}
                            <tr>
                                <!-- <td>{{ special_route.special.name }}</td> -->
                                <td>{{ special_route.special.special_code }}</td>
                                <td>{{ special_route.route.name_full }} ({{ special_route.route.name }})</td>
                                <td>{{ special_route.starting_price }}</td>
                                <td>{{ special_route.get_trip_type_display }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>
        {% else %}
            <section class="w-mt-8">
                <p>{% trans "No Special Fares available." %}</p>
            </section>
        {% endif %}
    </div>
{% endblock %}